<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Vitor Freitas]]></title><description><![CDATA[Um blog de um desenvolvedor Front End, sobre Javascript, HTML, CSS e todo o seu ecosistema.]]></description><link>https://vfreitas.com.br</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 12 Oct 2020 02:52:26 GMT</lastBuildDate><item><title><![CDATA[Acessibilidade no Front: Primeiros passos]]></title><description><![CDATA[Como desenvolvedores front-end, ter um pé em usabilidade e entender como entregar uma boa experiencia para o nosso usuário é uma peça…]]></description><link>https://vfreitas.com.br/acessibilidade-no-front/</link><guid isPermaLink="false">https://vfreitas.com.br/acessibilidade-no-front/</guid><pubDate>Tue, 20 Oct 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/dc437c1ad3ad0871d5150c94b2e430ce/a2510/a11y.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHtzrKFF//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBExQf/aAAgBAQABBQKmaJR0/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhABAQEAAAAAAAAAAAAAAAAAMQAg/9oACAEBAAY/AmZx/8QAHBABAAIBBQAAAAAAAAAAAAAAAQAQUREhMUGR/9oACAEBAAE/IXI0hgvYgbqgDh1X/9oADAMBAAIAAwAAABDfz//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EIf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCn/8QAHRABAAMAAQUAAAAAAAAAAAAAAQARIRAxYYGx4f/aAAgBAQABPxACoi3qFfJZafDZoI+oliOkEUCqFHfj/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Accessibility to A11y&quot;
        title=&quot;Accessibility to A11y&quot;
        src=&quot;/static/dc437c1ad3ad0871d5150c94b2e430ce/1c72d/a11y.jpg&quot;
        srcset=&quot;/static/dc437c1ad3ad0871d5150c94b2e430ce/a80bd/a11y.jpg 148w,
/static/dc437c1ad3ad0871d5150c94b2e430ce/1c91a/a11y.jpg 295w,
/static/dc437c1ad3ad0871d5150c94b2e430ce/1c72d/a11y.jpg 590w,
/static/dc437c1ad3ad0871d5150c94b2e430ce/a8a14/a11y.jpg 885w,
/static/dc437c1ad3ad0871d5150c94b2e430ce/a2510/a11y.jpg 1000w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Como desenvolvedores front-end, ter um pé em usabilidade e entender como entregar uma boa experiencia para o nosso usuário é uma peça fundamental. E para sermos inclusivos e entregarmos uma usabilidade boa para &lt;em&gt;todos os usuários&lt;/em&gt;, precisamos que nosso front seja acessível, mas por onde começar? Como testar e garantir uma boa acessibilidade? &lt;/p&gt;
&lt;h2&gt;O que é acessibilidade e porque é importante&lt;/h2&gt;
&lt;h2&gt;WCAG&lt;/h2&gt;
&lt;p&gt;Web Content Accessibility Guidelines.&lt;/p&gt;
&lt;h2&gt;Leitores de tela&lt;/h2&gt;
&lt;h2&gt;Teclado&lt;/h2&gt;
&lt;h2&gt;WAI-ARIA&lt;/h2&gt;
&lt;h2&gt;Boas práticas&lt;/h2&gt;
&lt;h2&gt;Testando&lt;/h2&gt;
&lt;h2&gt;Ferramentas e referências&lt;/h2&gt;</content:encoded></item><item><title><![CDATA[Escrevendo CSS do futuro: PostCSS Preset Env]]></title><description><![CDATA[PostCSS é uma ferramenta que já está no mercado há um bom tempo, e nos permite “compilar” um código escrito com uma sintax diferente, para…]]></description><link>https://vfreitas.com.br/postcss-preset-env/</link><guid isPermaLink="false">https://vfreitas.com.br/postcss-preset-env/</guid><pubDate>Wed, 30 Sep 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7d72798fa448ade88dc58144f3e2746e/6297e/exemplo-postcss.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB6klEQVQoz12T2XajMBBE+YuJbTYLtIFYDWILjhPPw/z/D9W0MBN78lBH4HN0qa5qe0IVYKnCOc0eYgJ+cEYQsscZJSgai3JckXYLeP8J1rzjoFscs8umU959n56SOaqiRW5KlHUHIQ1OfrzBnKIoRWw6qOsN9e0L1fAb+fQHUb0gLCz8vMfhBeqdmUTXjqQO13XAMM3gqgRPJeI4RUgOWdHDfH6hvN/R2A/U9o6EwKxZIchtVAxPh1ppCBIjgFJO9MwNEoohitgGTMhJRB91OpeWPmAR1gSqZrBqQlSOTyAXLjuNkDI7nuJNfvAc2QFVPUBdZmTtgsjYbcRj1u565rgBhcqQFTQiFxvUlXHyHzCXZRgmkORMTiv0sCKgzN4I5KBv+qdaeHmWo21qFEWFuinQNBVlqJFKhURIRJSjJod6+oBabsjHGwSNKOg30ZDzboC80PPFQtMWeGki6TLlSABOACEE4jPfRg33DGVDDpfrJtUvUAQ03YTCjrROI7J+ghkG1DMBOc+gdQ6V0sWECmApTnt+j7VJwKsBvunBcovADFsJh6zDL9WS9nHpdO+ezkoYU5FDQZKbo9fFDndgXE+IaT3cioRUzL8SfspzF1z4wV7I9z/kBaiaCdyutCIz5UbFEPDZ7OU/4F/PwUWKnVgrBQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Exemplo de resultado do PostCSS&quot;
        title=&quot;Exemplo de resultado do PostCSS&quot;
        src=&quot;/static/7d72798fa448ade88dc58144f3e2746e/fcda8/exemplo-postcss.png&quot;
        srcset=&quot;/static/7d72798fa448ade88dc58144f3e2746e/12f09/exemplo-postcss.png 148w,
/static/7d72798fa448ade88dc58144f3e2746e/e4a3f/exemplo-postcss.png 295w,
/static/7d72798fa448ade88dc58144f3e2746e/fcda8/exemplo-postcss.png 590w,
/static/7d72798fa448ade88dc58144f3e2746e/efc66/exemplo-postcss.png 885w,
/static/7d72798fa448ade88dc58144f3e2746e/c83ae/exemplo-postcss.png 1180w,
/static/7d72798fa448ade88dc58144f3e2746e/6297e/exemplo-postcss.png 2044w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://postcss.org/&quot;&gt;PostCSS&lt;/a&gt; é uma ferramenta que já está no mercado há um bom tempo, e nos permite “compilar” um código escrito com uma sintax diferente, para CSS puro. Essa sintax diferente nos permite através de plugins customizar a forma como escrevemos CSS, de forma a torná-lo mais simples ou mais eficiente por exemplo. Para quem já conhece o PostCSS é muito similar ao &lt;a href=&quot;https://babeljs.io/&quot;&gt;Babel&lt;/a&gt; que é o compiler (ou transpiler) mais famoso de Javascript.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Caso queira saber mais sobre o que é um compiler ou transpiler, &lt;a href=&quot;https://www.stevefenton.co.uk/2012/11/compiling-vs-transpiling/&quot;&gt;recomendo esse texto&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Nesse post vamos ver como usar o PostCSS em conjunto com o seu plugin &lt;a href=&quot;https://preset-env.cssdb.org/&quot;&gt;Preset Env&lt;/a&gt;, de forma que seja possível escrevermos CSS utilizando funcionalidades que ainda não existem nos navegadores, e mesmo assim obter um CSS que rode sem problemas neles.&lt;/p&gt;
&lt;h2&gt;Futuro do CSS&lt;/h2&gt;
&lt;p&gt;Antes de ir para a prática vamos entender o que são essas funcionalidades novas. De forma &lt;em&gt;resumida&lt;/em&gt; assim como no Javascript o CSS possui um processo de adição de novas funcionalidades, que são organizadas em etapas (Stages). E em cada etapa passam por diferentes tipos de testes e requisitos, até que finalmente são implementadas pelos navegadores (como o Chrome). Só que esse processo é bem longo e demorado, então enquanto essas funcionalidades não chegam nos navegadores, podemos utilizar ferramentas como o PostCSS para traduzirem essas funcionalidades novas em CSS atual.&lt;/p&gt;
&lt;p&gt;Podemos ver as próximas funcionalidades do CSS nos links abaixo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://cssdb.org/&quot;&gt;CSS DB: Lista de funcionalidades&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://preset-env.cssdb.org/features&quot;&gt;PostCSS Preset Env: Cada funcionalidade e exemplos&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Stages&lt;/h3&gt;
&lt;p&gt;Vamos falar um pouco sobre as etapas pelas quais cada funcionalidade passa:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Stage 0: Ambição&lt;/em&gt; - Uma ideia ou um rascunho de uma nova funcionalidade&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Stage 1: Experimento&lt;/em&gt; - Um teste/experimento que procura resolver/melhorar a linguagem&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Stage 2: Possível&lt;/em&gt; - Quando a nova funcionalidade já possui uma solução técnica mas ainda pode mudar&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Stage 3: Adotado&lt;/em&gt; - Foi adotada pela comunidade tanto como ideia quanto tecnicamente e terá poucas mudanças&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Stage 4: Padronizado&lt;/em&gt; - É um novo padrão na web e será implementada pelos navegadores, etc&lt;/li&gt;
&lt;li&gt;&lt;em&gt;X: Rejeitado&lt;/em&gt; - A proposta foi rejeitada&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Como utilizar&lt;/h2&gt;
&lt;p&gt;Primeiro de tudo o jeito mais fácil de começar a brincar com as novas funcionalidades do CSS é utilizando o &lt;a href=&quot;https://preset-env.cssdb.org/playground&quot;&gt;playground do próprio Preset Env&lt;/a&gt;, onde é possível testar todas as funcionalidades de todos os Stages e ver na hora o CSS gerado como resultado do compiler.&lt;/p&gt;
&lt;p&gt;Recomendo brincar um pouco la e descobrir as novas funcionalidades. Duas bem bacanas que estão mudando bastante a forma de se usar CSS puro são:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties&quot;&gt;Custom Properties&lt;/a&gt; - Que inclusive já foram implementadas pelos navegadores mais modernos e estão no Stage 3.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://drafts.csswg.org/css-nesting/#:~:text=A%20style%20rule%20can%20be,compound%20selector%20of%20the%20selector.&quot;&gt;Nesting Rules&lt;/a&gt; - Que nos permite escrever CSS em cascata (como nos pre-processadores Sass/Less/Stylus), porém ainda está no Stage 1.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Instalando no projeto&lt;/h3&gt;
&lt;p&gt;Normalmente o PostCSS já possui integrações com os frameworks mais famosos do mercado (como React, Angular e Vue), nesses casos recomendo que você veja a documentação do seu framework ou a documentação do Bundler utilizado (Webpack, Rollup). Vou deixar alguns links no final do post para tutoriais explicando como instalar em cada framework/bundler.&lt;/p&gt;
&lt;p&gt;Para utilizarmos o Preset Env junto com o PostCSS primeiro instalamos tanto o PostCSS com o Preset Env:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; postcss postcss-preset-env --save-dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Depois criamos um arquivo chamado &lt;code class=&quot;language-text&quot;&gt;postcss.config.js&lt;/code&gt; e adicionamos a nossa configuração:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  plugins&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;postcss-preset-env&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* Opções */&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Depois podemos configurá-lo por exemplo para usarmos todas as novas funcionalidades desde o Stage 1:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  plugins&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;postcss-preset-env&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      stage&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podemos também habilitar funcionalidades especificas ou definir para quais navegadores o PostCSS deve gerar o nosso CSS:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  plugins&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;postcss-preset-env&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      stage&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Esse Stage não suporta Nesting Rules&lt;/span&gt;
      features&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;nesting-rules&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Porém aqui indicamos que ela seja utilizada&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      browsers&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;last 2 versions&apos;&lt;/span&gt; 
      &lt;span class=&quot;token comment&quot;&gt;// Aqui dizemos que o PostCSS deve compilar funcionalidades &lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// que não rodem nas ultimas 2 versões dos navegadores mais comuns no mercado&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Para saber mais sobre a parte de browsers do PostCSS e como configurar &lt;a href=&quot;https://css-tricks.com/browserlist-good-idea/&quot;&gt;recomendo esse link&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;#done&lt;/h2&gt;
&lt;p&gt;Espero que tenham gostado, e qualquer dúvida ou sugestão só mandar um comentário aqui em baixo ou uma mensagem no Twitter.&lt;/p&gt;
&lt;p&gt;Obrigado por ler!&lt;/p&gt;
&lt;h2&gt;Referencias e links úteis&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/csstools/postcss-preset-env&quot;&gt;PostCSS Preset Env&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://postcss.org/&quot;&gt;PostCSS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nextjs.org/docs/advanced-features/customizing-postcss-config&quot;&gt;Next.js com PostCSS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vue-loader.vuejs.org/guide/pre-processors.html#postcss&quot;&gt;Vue Loader com PostCSS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/vitejs/vite#postcss&quot;&gt;Vite com PostCSS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://webpack.js.org/loaders/postcss-loader/&quot;&gt;Webpack com PostCSS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Trabalhando com Monorepo em Javascript]]></title><description><![CDATA[Já ouviu falar do termo Monorepo? Ou Multirepo? São termos utilizados para definir dois modelos arquiteturais, onde resumidamente são formas…]]></description><link>https://vfreitas.com.br/trabalhando-com-monorepo-em-javascript/</link><guid isPermaLink="false">https://vfreitas.com.br/trabalhando-com-monorepo-em-javascript/</guid><pubDate>Wed, 16 Sep 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1c6cc23e23443601a17f652910f4f952/92d15/monorepo-multirepo.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 70.27027027027026%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAB80lEQVQ4y3VT227TQBD1//8MCCGBUCoVKipxechDENAmTm0H7DjxJfF1bceHOVvvNqnKSCN7dmbOzJzZdZIkQdM0qKoKbdui73ut5uxc67pG13VWaZ/78zyHw0QjWZZhuVxivV6jKks8l3EctW+z2cD3fZxOpws/sRwiUwYJLgUkiiL8DUMcivIikEq/53laCXw8HvU5O1VK6a9Ty4EqCxT7GHtR3Ukv46R7xHEkCbVOIh0E5Nd0S5s6DIMd3ylVh/buB3bXb/Hp5h1qqdQED8hmr3H7+QPSZIdGQMwk7ISgBCAo+abdTjGOadmXMeI41kF0Br6HUEY/X5BZhDkj+Pn3EZCbO40IwgiHw9HyGURbpGlmCzBhPp/rIhSCLxYLuK6rbTtyxXZ3W5SBi4f1PZQEtnmG2lsJ+SuUxdGOZKbhdk1XtMmh7ZAcKvcO+9sZvny9RtP1UOEf5Dfv8f3bR+RZaoN19xNnBKIQ3CztiUMBXXm+bDl5JF5A3WAjV2hrExicpSlyoeWkR+71tTkc8gueHT2CtMzgcrrMBKFdFIX+Z3Ulei+XPomEw6qQ4lv8/vXTcvrE4TTK+Wt4brPQaF7FLsT+6g2uZq/Qd2pqYLDPzwIy0YCZf2OzuumgboQr/TI6OyZ9htcLwJfe7kvn/xMC/gPVnjfU5d0XrQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Multirepo vs Monorepo&quot;
        title=&quot;Multirepo vs Monorepo&quot;
        src=&quot;/static/1c6cc23e23443601a17f652910f4f952/92d15/monorepo-multirepo.png&quot;
        srcset=&quot;/static/1c6cc23e23443601a17f652910f4f952/12f09/monorepo-multirepo.png 148w,
/static/1c6cc23e23443601a17f652910f4f952/e4a3f/monorepo-multirepo.png 295w,
/static/1c6cc23e23443601a17f652910f4f952/92d15/monorepo-multirepo.png 581w&quot;
        sizes=&quot;(max-width: 581px) 100vw, 581px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Já ouviu falar do termo Monorepo? Ou Multirepo? São termos utilizados para definir dois modelos arquiteturais, onde resumidamente são formas de definirmos se iremos manter nosso código de vários projetos em apenas um repositório versionado (git) ou em vários repositórios onde cada projeto irá ter o seu git por exemplo.&lt;/p&gt;
&lt;p&gt;Nesse post vamos falar sobre como criar o seu monorepo utilizando Javascript, não muito sobre quais são os casos indicados de cada arquitetura, ou seus prós e contras, porém vou deixar aqui uma comparação simples das duas abordagens:&lt;/p&gt;
&lt;h2&gt;Multirepo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Vários repositórios, normalmente 1 por projeto.&lt;/li&gt;
&lt;li&gt;Cada projeto tem o seu processo de deploy separado, com testes automatizados e builds apenas daquele projeto, sendo então mais rápidos e previsíveis.&lt;/li&gt;
&lt;li&gt;Cada repositório tem as suas dependências com suas versões e é independente, porém normalmente isso leva a duplicidade de dependências, ou a conflito de versões.&lt;/li&gt;
&lt;li&gt;Os times possuem mais autonomia, podendo realizar mudanças em seu repositório sem envolver outros times.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Monorepo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Um repositório para vários projetos e times.&lt;/li&gt;
&lt;li&gt;Como temos um repositório só é “mais simples” para novos membros se situarem.&lt;/li&gt;
&lt;li&gt;Os times tem menos autonomia, já que qualquer mudança pode impactar outros projetos, e boa parte das alterações devem ser alinhadas e planejadas entre os times.&lt;/li&gt;
&lt;li&gt;As dependências dos projetos são unificadas e centralizadas, fazendo com que todos os projetos respeitem uma mesma versão de uma dependência X, assim gerando menos conflitos e duplicamento de dependências.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tem vários outros pontos a se levar em conta na hora de escolher qual caminho deve ser tomado na sua empresa/projeto, lembre-se, não existe bala de prata ;), mas realizar uma escolha que faça sentido com a cultura da empresa, e dos times envolvidos, com certeza trará mais benefícios.&lt;/p&gt;
&lt;p&gt;Agora vamos para a prática ;)&lt;/p&gt;
&lt;h2&gt;Início do projeto&lt;/h2&gt;
&lt;p&gt;Para começar vamos criar um novo projeto, que será um monorepo e que terá a princípio duas bibliotecas. Para isso vamos utilizar duas ferramentas importantes, o &lt;a href=&quot;https://lerna.js.org/&quot;&gt;Lerna&lt;/a&gt; e o &lt;a href=&quot;https://classic.yarnpkg.com/en/docs/workspaces/&quot;&gt;Yarn Workspaces&lt;/a&gt;. Cada uma delas tem o seu papel em nos fornecer funcionalidades que vão nos ajudar a gerenciar nosso monorepo, por isso devem ser usadas em conjunto, já que &lt;em&gt;uma não substitui a outra&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Vamos falar um pouco dos dois antes de partir pro código.&lt;/p&gt;
&lt;h3&gt;Yarn Workspaces&lt;/h3&gt;
&lt;p&gt;O Yarn é um gerenciador de dependências assim como o npm, e possui a funcionalidade de workspaces que nos permite gerenciar repositórios que são monorepos. Basicamente o Yarn Workspaces fica responsável por gerenciar as dependências do projeto e fazer a distinção de quais dependências são utilizadas por qual projeto dentro do monorepo, e quais são globais e servem para o projeto como um todo. Cuidando então da parte mais de “baixo” de um monorepo.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A funcionalidade de workspaces do Yarn, também está sendo criada pelo time do NPM, e vai estar disponível no &lt;a href=&quot;https://blog.npmjs.org/post/617484925547986944/npm-v7-series-introduction&quot;&gt;NPM@7.0.0&lt;/a&gt;. Depois que ele for lançado irei atualizar esse artigo ou criar um novo comparando com o Yarn no uso com monorepos.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Lerna&lt;/h3&gt;
&lt;p&gt;Já o Lerna é uma ferramenta que cuida da parte mais de “cima” de um monorepo, trazendo facilidades ao gerenciar um monorepo, e quando utilizado em conjunto com o Yarn Workspaces, ele deixa todo o trabalho de gerenciamento de dependências com o Yarn, e cuida mais da parte de execução de comandos, e publicação desses pacotes, assim como gerenciando a versão (utilizando &lt;a href=&quot;https://semver.org/&quot;&gt;semver&lt;/a&gt;) de cada projeto, seja com uma versão única para todos, ou diferente.&lt;/p&gt;
&lt;p&gt;Agora para começar vamos instalar os dois:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;O Yarn possui seus próprios métodos de &lt;a href=&quot;https://classic.yarnpkg.com/en/docs/install&quot;&gt;instalação dependendo do sistema operacional&lt;/a&gt;.
Para manter a simplicidade iremos instalar da forma mais simples, apesar de &lt;a href=&quot;https://classic.yarnpkg.com/en/docs/install/#alternatives-stable&quot;&gt;não recomendada pelo Yarn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -g &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -g lerna&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Depois podemos criar nosso projeto usando a CLI do Lerna:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ lerna init&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Agora precisamos integrar o Yarn Workspaces com o Lerna, para isso precisamos adicionar duas configurações, e configurar o &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; das nossas duas bibliotecas!&lt;/p&gt;
&lt;p&gt;package.json&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;private&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// E dizemos pro Yarn que esse package.json princípal, é privado, e não deve ser publicado&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;workspaces&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Adicionamos essa entrada mapeando o mesmo caminho de packages que já veio&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;packages&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// configurado pelo Lerna. Essa entrada é para avisar o Yarn workspaces, quais são os &lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&quot;packages/**&quot;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// seus workspaces&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;lerna.json&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;npmClient&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;yarn&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Indicamos ao Lerna que estamos usando o yarn invés do npm&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;useWorkspaces&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// E dizemos que o workspaces do yarn esta habilitado&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;packages&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;packages/*&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0.0.0&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E depois criamos dois &lt;code class=&quot;language-text&quot;&gt;packages&lt;/code&gt; que serão nossas bibliotecas, e adicionamos um &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; para cada:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5d7a4324926042ce2ebf6449e13f53ce/8c557/packages-novos.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVUlEQVQoz42S6XaCMBCFfYzKlgRkDYsQCKjVbvZ0+eH7v83tgKitp9j+uCdhknxzZ5hZLDv4fgmvasA2GmytIaoa3mIJzx91tQ9ChUTqQXHSIKTvoNAIYoVZGGv4bg6+ajD/bDE/dLC6Cpyn4C5J/CYJxi/iTMJKcjh0fwC6boYoVTD2Dey1AvcyCCeFIKgQtHf/ECVx5BJ8kWEWEVAQuVpGcDaKXHYwen20MJ+aI7x3NQEa4pTYyUdg79CjR4GsYbxqWI8NrId6uHjSFPB8TkBbFmDe6JBTWXlGwZ2C+UzQXQ27LuGU5b+BTnp22MIPEmSKgFvq41sL470dXNordRP4o+RiBAYELNKQRobc3ddHUF3BNRIIW14e0XrTYXYFFNsKd4fVMDbmXsN8oVYE+RnIJ/7wEGdUHbWH+X0Pk5YOyE2Yg/VKqLkRzaWf3y73O/CUlNYvcNUlxPXcassAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Imagem das duas bibliotecas novas&quot;
        title=&quot;Imagem das duas bibliotecas novas&quot;
        src=&quot;/static/5d7a4324926042ce2ebf6449e13f53ce/fcda8/packages-novos.png&quot;
        srcset=&quot;/static/5d7a4324926042ce2ebf6449e13f53ce/12f09/packages-novos.png 148w,
/static/5d7a4324926042ce2ebf6449e13f53ce/e4a3f/packages-novos.png 295w,
/static/5d7a4324926042ce2ebf6449e13f53ce/fcda8/packages-novos.png 590w,
/static/5d7a4324926042ce2ebf6449e13f53ce/8c557/packages-novos.png 700w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;packages/log-lib/package.json&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@my-monorepo/log-lib&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;packages/math-lib/package.json&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@my-monorepo/math-lib&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E depois rodamos o comando referente ao &lt;code class=&quot;language-text&quot;&gt;npm install&lt;/code&gt; do Yarn, para que ele possa identificar nossos workspaces, e baixar tudo que for preciso.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Agora se olharmos no &lt;code class=&quot;language-text&quot;&gt;node_modules&lt;/code&gt; do nosso projeto, podemos ver que o Yarn já cuidou de criar as referencias aos nossas duas bibliotecas, e deixar disponível para caso outro projeto dentro do monorepo queira utiliza-lo:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8bd97cad81116ea3552f58969704ebb4/31198/node-modules-com-packages.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 76.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsklEQVQ4y6WU607CQBCFeRAVet/tvaVyqa2lKHIJXglgook/jDG+/wMcZxdJACWU+ONkmt3p1zOz061pegDGEzDnAtzNZLT9ArZ3Cc2IoKg+VO2wFJKmh6gpqgfDDMHsLsEy6GYTJmvDYC2Z1FDcylK1YAXUhUu7Qw5zuSgTGo6MYr+KJFBfAw0COl0qtYQTlLIEAVwnHg00CMjdlGB96dKLBrB49x8O6YE7KR1EAYt6qVJz16VXdfmrZAEU5QqoZsRbsOOBui97yOTYZOQy/QXaB9388LZD6qGYPyacUhRuvXggyz8E2wGuBpPxNkw7l6orAU5OOU7PbEqscCj0vmElK2CdxkO8aDETcZIizUZotXtIkhxNkqK6OKtzkv0T/5JNDC7htSDqIYz76KQFbu8XWCzf8fL6iendC8aTZzTPrxFGpcwJ43JHq7WIYqszhOvnqGXFI3pXSwxGr1g8f2G+/MTT/ANp/ohu9oDLco6ivyDN96pH++PpG0HH1ENNNNSH51vI8xyTyQzT2xmGowcMbu7oP48qjY1o3c4pd+CGBfyoj4DKMK0I4ibanMUql8M3+kzFlgEaNHYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Nossas bibliotecas na node_modules&quot;
        title=&quot;Nossas bibliotecas na node_modules&quot;
        src=&quot;/static/8bd97cad81116ea3552f58969704ebb4/fcda8/node-modules-com-packages.png&quot;
        srcset=&quot;/static/8bd97cad81116ea3552f58969704ebb4/12f09/node-modules-com-packages.png 148w,
/static/8bd97cad81116ea3552f58969704ebb4/e4a3f/node-modules-com-packages.png 295w,
/static/8bd97cad81116ea3552f58969704ebb4/fcda8/node-modules-com-packages.png 590w,
/static/8bd97cad81116ea3552f58969704ebb4/31198/node-modules-com-packages.png 694w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Publicando nossos pacotes&lt;/h2&gt;
&lt;p&gt;Agora vamos ver como publicar nossos pacotes e testá-los localmente, e depois como publicá-los diretamente no NPM ou em algum outro registro privado (comum em grandes empresas).&lt;/p&gt;
&lt;h3&gt;Verdaccio&lt;/h3&gt;
&lt;p&gt;Para publicar nossos pacotes localmente vamos utilizar o &lt;a href=&quot;https://verdaccio.org/docs/en/installation&quot;&gt;Verdaccio&lt;/a&gt; que é um registro privado feito com NodeJs, de fácil configuração e que nos permite adicionar ou buscar pacotes pelo NPM, da mesma forma que buscamos e adicionamos pacotes no próprio registro do NPM.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;O que é um registro?&lt;/em&gt; É basicamente um repositório de pacotes/bibliotecas que possui uma API para buscar/adicionar pacotes, é compatível com o &lt;a href=&quot;https://semver.org/&quot;&gt;semver&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Para usar o Verdaccio, basta instala-lo globalmente:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -g verdaccio&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E iniciá-lo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ verdaccio&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ele vai retornar em qual URL o registro dele esta rodando e qual o seu arquivo de configuração:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/490571b9240d40b08fed592b61259695/5faa8/verdaccio-rodando.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 17.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAxElEQVQY002P226EMAxEc3FuG5KQRRRWBJa+9P//cOolSO3DaMayNfIRZrOoZ0GeEuIQYZ2BfijopKAegiWhowIlDR3UX049qyD7/S2hhcOxHzjeO+ZlRts3vNoLoXiUKSMMHlQUTCWYrGFG1pOucmX/yXcXmhz2d0M72u0b1ragfo34/jnxXCvsSging18sPBPZmQv952Om8QZCcpGQ3bUxiCkijxl1qnDBXRg06AuN+KsrlxuZ9ck0EO8tz9SLJBcKgV9r9Fk4eSq+OAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Verdaccio rodando&quot;
        title=&quot;Verdaccio rodando&quot;
        src=&quot;/static/490571b9240d40b08fed592b61259695/fcda8/verdaccio-rodando.png&quot;
        srcset=&quot;/static/490571b9240d40b08fed592b61259695/12f09/verdaccio-rodando.png 148w,
/static/490571b9240d40b08fed592b61259695/e4a3f/verdaccio-rodando.png 295w,
/static/490571b9240d40b08fed592b61259695/fcda8/verdaccio-rodando.png 590w,
/static/490571b9240d40b08fed592b61259695/efc66/verdaccio-rodando.png 885w,
/static/490571b9240d40b08fed592b61259695/c83ae/verdaccio-rodando.png 1180w,
/static/490571b9240d40b08fed592b61259695/5faa8/verdaccio-rodando.png 1444w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Vamos deixar ele rolando em um terminal separado e guardar a URL dele, onde aqui &lt;em&gt;na minha máquina&lt;/em&gt; é a &lt;code class=&quot;language-text&quot;&gt;http://localhost:4873/&lt;/code&gt;, pois vamos precisar dela na hora de publicar nossos pacotes. E vamos acessar o arquivo de configuração que no meu caso fica em &lt;code class=&quot;language-text&quot;&gt;~/.config/verdaccio/config.yaml&lt;/code&gt; e adicionar as seguintes linhas dando permissão de publicação sem precisar de autenticação (&lt;em&gt;apenas para ambientes locais!&lt;/em&gt;):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;packages&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;&apos;@my-monorepo/*&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;# scoped packages&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;access&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $all
      &lt;span class=&quot;token key atrule&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $anonymous
      &lt;span class=&quot;token key atrule&quot;&gt;unpublish&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $anonymous&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E caso você queira já deixar essa configuração padrão para todos os pacotes futuros, podemos habilitar isso usando o &lt;code class=&quot;language-text&quot;&gt;**&lt;/code&gt; dentro de packages:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;&apos;**&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;access&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $all
    &lt;span class=&quot;token key atrule&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $anonymous
    &lt;span class=&quot;token key atrule&quot;&gt;unpublish&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $anonymous&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E pronto ;)&lt;/p&gt;
&lt;h3&gt;Configurando o Lerna para publicar&lt;/h3&gt;
&lt;p&gt;Para publicar nossos pacotes e gerar versão automaticamente precisamos apenas dizer para o Lerna como queremos que ele faça isso, e rodar alguns comandos dele, além de definir no nosso &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; algumas informações sobre nossos pacotes.&lt;/p&gt;
&lt;p&gt;Primeiro vamos adicionar algumas configurações no nosso &lt;code class=&quot;language-text&quot;&gt;lerna.json&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Alteramos nosso version para &quot;independent&quot;, isso faz com que o Lerna tenha uma versão &lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// única para cada pacote nosso, assim eles podem evoluir de forma independente&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;independent&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
  &lt;span class=&quot;token property&quot;&gt;&quot;command&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;publish&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;registry&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://localhost:4873&quot;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Aqui é a URL do Verdaccio&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;allowBranch&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;master&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Dizemos que a única branch que tem permissão de gerar uma versão é a master&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Ao publicar nossos pacotes o Lerna vai automaticamente realizar um commit no repositório&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Atualizando coisas como versões nos package.json, e criando um CHANGELOG.md&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;chore(release): publicando versão&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Permite o Lerna pular qualquer etapa de teste ou &lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// lint na hora de realizar o commit caso seu projeto tenha&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;noCommitHooks&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Pedimos para ele ignorar mudanças no yarn.lock&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;ignoreChanges&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;yarn.lock&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Diz para o Lerna usar os conventional commits para detectar a versão, explicado abaixo&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;conventionalCommits&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;O ConventionalCommits é um padrão de mensagem de commit, que tem como o objetivo tornar as mensagens mais explicitas e
diretas, além de permitir que a versão daquele projeto seja gerenciado de forma automática através dessas mensagens.
&lt;em&gt;Recomento fortemente&lt;/em&gt; que você leia mais a respeito na &lt;a href=&quot;https://www.conventionalcommits.org/en/v1.0.0/&quot;&gt;página oficial da convenção&lt;/a&gt;, e para facilitar &lt;a href=&quot;https://github.com/BeeTech-global/bee-stylish/tree/master/commits&quot;&gt;tem uma pequena explicação em português desse padrão.&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Agora podemos adicionar um simples script de release no nosso &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; na raiz:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//...&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;release&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;lerna publish&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E para finalizar, adicionar dois arquivos javascript simples, dentro dos nossos dois pacotes &lt;code class=&quot;language-text&quot;&gt;math-lib&lt;/code&gt; e &lt;code class=&quot;language-text&quot;&gt;log-lib&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// math-lib/index.js&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;factorialize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; num &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; num &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    num &lt;span class=&quot;token operator&quot;&gt;*=&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; factorialize&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// log-lib/index.js&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;logSomething&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;LOG-LIB: &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logSomething&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Publicando&lt;/h3&gt;
&lt;p&gt;E para finalmente publicar nossos pacotes precisamos apontar para um registro, ou logar na nossa conta do NPM, e publicá-los de forma pública. Nesse caso iremos usar nosso amigo Verdaccio, que configuramos acima e publicar nosso pacote no nosso registro local.&lt;/p&gt;
&lt;p&gt;Então vamos rodar nosso comando de release:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt; release&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ao rodar esse comando, o Lerna vai calcular as versões dos pacotes existentes e pedir uma confirmação se esta tudo ok:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0ac6a87b6a30664b0a8d23784dacdbb9/9239a/lerna-publish-confirmacao.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABR0lEQVQoz3WQ2VLCQBBF8ycuIFsIRgWyQDaykyAZQKhS//83jjNBLSz14VRP90x337la7B9Ighey8ETgCnx7K2ND6Ajmi4ppscNwYmbWCmeRs/AKRmObe9M78+AxuV8yGFn0h3O0IKoIgxrPlw8Nm74+56oz4aZr0uk+0O2Y9PpT7iTdnuKpbewNZj9QtXZgVAuMuED4R0R8ZFMe2TavpLmQqmIepyFD3ZaqnAvO+XddxqFutSo1K825XTpUXkPpbknsinq1J8sEebkjiGrmdoLtZjgSdbacBHeZy1raRi9Y40o7dMNBS9IG0/Rl4jL+RG3U5WZVU1uHrQKbgWJk/eL7XikU+3fW9ZFqc6JYH/DDCuWr2rr0y/bL17fm2bsLr/5DS7KGKH4mTrdk+Y5otaEo95RyuPJRncXujUzmIythIJv+UvnFB0ut6AJVNCb+AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Lerna mensagem de confirmação&quot;
        title=&quot;Lerna mensagem de confirmação&quot;
        src=&quot;/static/0ac6a87b6a30664b0a8d23784dacdbb9/fcda8/lerna-publish-confirmacao.png&quot;
        srcset=&quot;/static/0ac6a87b6a30664b0a8d23784dacdbb9/12f09/lerna-publish-confirmacao.png 148w,
/static/0ac6a87b6a30664b0a8d23784dacdbb9/e4a3f/lerna-publish-confirmacao.png 295w,
/static/0ac6a87b6a30664b0a8d23784dacdbb9/fcda8/lerna-publish-confirmacao.png 590w,
/static/0ac6a87b6a30664b0a8d23784dacdbb9/efc66/lerna-publish-confirmacao.png 885w,
/static/0ac6a87b6a30664b0a8d23784dacdbb9/c83ae/lerna-publish-confirmacao.png 1180w,
/static/0ac6a87b6a30664b0a8d23784dacdbb9/9239a/lerna-publish-confirmacao.png 1246w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;E ao confirmar ele irá publicar essas versões dos nossos pacotes:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d7d0b8cd9daaa2efa72d4cee98c9a098/081d5/lerna-publish-sucesso.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 118.24324324324324%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEDElEQVQ4y31Vx5LbVhDkn7hK2qCNTCBBBCJnIhIAwbDLlVayD775pKM/vT3zVkRtUPkw9ZBev+npnsFgPDcRFQ20IkPmNFine6ybR5TrAyqKKK6xNBM4bg7DTnE1tXDxZYaLq7lYL1+tX65lDDQtgBlm+MM2kS8q1NkBZX1AVmxhOSlcr4A0d6CoAe6HOm5vFdzRej96idt7ldYlruk5Aw8UzUdRbFAmDeroAfvyCXm2FRk27RGHhz+x2X5Ft/sm7kPKOElb+EEF1y9gOxkdnEFWPIwmBgYLOrntNvj584i12cIbRTDUCCZlx1mpWgjdiMUGg6hrywhBuBZAfK0QQ8bgd6oeYjCbu2i6Fv/8SzStBvE4haXEcLwc+jKGSXWz3UzU0aJrBl7SAaa1egGiVVZ83NwpuLpZYCAvXLhhjllBQR87kxC2ksAPK9gE6keVuObTOZubO1Vs5trx9d1QE/VjUTgGqu4jiVqYoxYOZVbELVK/RWAU8PUM+iIU1Pn0s4tpv/F3CguVVT1AuupgSA0iv8Pj7ge+H//GOt9jNrFxeTHD5/Mpzi/fbnwfvW0UzUMcNVhOawR2jdSrYc5CRGaJPNzA0GJBd6H6QsXzS+kN8CnjPkNZceC5BZQRyW8VqDdHjCUTd+SxrNxBN2MqfCLqN194wpPjiSnoM90PGS5UF4FfQRnnCKl2h8cf8PxSCLHbf4dMIKzmTHZFMKgsgG1MJOsjIIuSJVvYo40A3D48Q/5Fryj38IISq3SDNN+KQ8Jo3bcmvzu7kCjTeQ8qWi9IawzdFcxFCt8kq7il8Bery6bmGrIf2YvsQ6av6ZHIkt/x4Sf6A4U+cKMSN0mGOWVmSyEsLUEQr+EERe9DBmYg7t/heCni9l4TK/uypyxEcQoshyWp6yG0MqGwq67gqSkMJaK6uWLDSYhTvPehoMy2iUIaX5MKcbjFrvuG4+EvpMkG4xHZ5Fz6oOj/+lB7ZezAqlFGHSKjROY11DENVNkndR1MZ7Zotfc+fA3Wq7yKycBTAvRassozJjRE2Wvt5omGRCHGEw8DriH7kOvIwO/p9jX0vVL4MKCsdodnAeKSF+v2UXhtPDWFkrzy/XBs9AP2A2VZcYVN1CGBuGsapk+Yk4F5c1Htsco2qOoH5MXuxZN0L56TN/mee/ytD6mG0aohy9A/Y07/DqZHnpOoZtNXwTOPV86QvShakA7llUfYCXTAbdR0T8iaHer8IOpWNQ+CNm/oQcnEp17mEOC/3jP13tjTqYG06qA/UuvVG3TxHolb0WAg5e0El/Th508jnJ1N8ImCN7IgL1Rn/Vjj4EE7uB7OEXodstUz8ugrcv9IE7uGrdE4MzqoZHKJ6iURuG5EAuzq5vc+vL5d4D+G/TjVt8Y3zwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Lerna mensagem de confirmação&quot;
        title=&quot;Lerna mensagem de confirmação&quot;
        src=&quot;/static/d7d0b8cd9daaa2efa72d4cee98c9a098/fcda8/lerna-publish-sucesso.png&quot;
        srcset=&quot;/static/d7d0b8cd9daaa2efa72d4cee98c9a098/12f09/lerna-publish-sucesso.png 148w,
/static/d7d0b8cd9daaa2efa72d4cee98c9a098/e4a3f/lerna-publish-sucesso.png 295w,
/static/d7d0b8cd9daaa2efa72d4cee98c9a098/fcda8/lerna-publish-sucesso.png 590w,
/static/d7d0b8cd9daaa2efa72d4cee98c9a098/efc66/lerna-publish-sucesso.png 885w,
/static/d7d0b8cd9daaa2efa72d4cee98c9a098/c83ae/lerna-publish-sucesso.png 1180w,
/static/d7d0b8cd9daaa2efa72d4cee98c9a098/081d5/lerna-publish-sucesso.png 1264w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;E pronto ;) pacotes publicados.&lt;/p&gt;
&lt;p&gt;Agora podemos instalar eles a partir de qualquer outro projeto, é só apontar na hora do install para o nosso registro local (Verdaccio), dessa forma:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; @my-monorepo/math-lib@1.0.1 --registry http://localhost:4873&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E consumir o conteúdo da sua nova biblioteca ;).&lt;/p&gt;
&lt;h3&gt;Bônus: Changelog&lt;/h3&gt;
&lt;p&gt;Se você olhar no nosso monorepo após a release, encontrará arquivos chamados de &lt;a href=&quot;https://en.wikipedia.org/wiki/Changelog&quot;&gt;CHANGELOG.md&lt;/a&gt;, além de um commit diferente no histórico do git do seu projeto, algo assim:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7b95ac636afdd37e6e04bdc8f814c03c/5a791/commit-lerna.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 21.62162162162162%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAz0lEQVQY03WO226CUBBF+Rhu2hhjDAICpeF6AKkcIBpM2jT+/z+sjr70xT6s7Jlk75ltHKOU+8/IeWiYrorl68RNuN46oeWydHzfBwZdoXtNX0+ERYGTfxDFKVmRkZf5k0oVGFGiUK0mSRvRibI+051mVDPSf17Q40LbTQRhSezn7N4CNu6BlXPAErUcD9P+w3DXPtvdO35Y8Di+9zKCY4Un4TCqCGV+eEx7j+l6WKsDtuyO4L7AsMW02cbUzUTTzU+t1ShtZ2mr5VnyMvgfv2bBiJeWY3C5AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Commit do Lerna&quot;
        title=&quot;Commit do Lerna&quot;
        src=&quot;/static/7b95ac636afdd37e6e04bdc8f814c03c/fcda8/commit-lerna.png&quot;
        srcset=&quot;/static/7b95ac636afdd37e6e04bdc8f814c03c/12f09/commit-lerna.png 148w,
/static/7b95ac636afdd37e6e04bdc8f814c03c/e4a3f/commit-lerna.png 295w,
/static/7b95ac636afdd37e6e04bdc8f814c03c/fcda8/commit-lerna.png 590w,
/static/7b95ac636afdd37e6e04bdc8f814c03c/efc66/commit-lerna.png 885w,
/static/7b95ac636afdd37e6e04bdc8f814c03c/c83ae/commit-lerna.png 1180w,
/static/7b95ac636afdd37e6e04bdc8f814c03c/5a791/commit-lerna.png 1248w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Essa é a funcionalidade do Lerna de histório de mudanças através das mensagens de cada commit. Ele pega essas mensagens e lista elas nesse arquivo de Changelog, deixando mais fácil o rastreamento de mudanças das nossas bibliotecas.&lt;/p&gt;
&lt;h2&gt;Source code&lt;/h2&gt;
&lt;p&gt;O código do projeto de teste usado como exemplo nesse artigo &lt;a href=&quot;https://github.com/vfreitas-/blog-example-monorepo-javascript&quot;&gt;pode ser encontrado aqui&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Por hoje é só&lt;/h2&gt;
&lt;p&gt;Uma evolução do que aprendemos aqui hoje seria configurarmos esse processo de release de forma automatizada ao se realizar um commit ou merge de uma Pull Request na branch master por exemplo, dessa forma as versões dos nossos pacotes sempre seriam geradas automaticamente em cada merge e publicadas no registro, habilitando então um processo de CI/CD.&lt;/p&gt;
&lt;p&gt;Em um próximo artigo, falaremos em como realizar essa automatização em uma pipeline, além de boas práticas.&lt;/p&gt;
&lt;p&gt;Obrigado por ler!&lt;/p&gt;</content:encoded></item></channel></rss>