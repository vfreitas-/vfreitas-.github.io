{"componentChunkName":"component---src-templates-blog-post-js","path":"/postcss-preset-env/","result":{"data":{"site":{"siteMetadata":{"title":"Vitor Freitas"}},"markdownRemark":{"id":"c53456be-2ef3-5e67-9653-5b9ca4379574","excerpt":"PostCSS é uma ferramenta que já está no mercado há um bom tempo, e nos permite “compilar” um código escrito com uma sintax diferente, para CSS puro. Essa sintax…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7d72798fa448ade88dc58144f3e2746e/6297e/exemplo-postcss.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB6klEQVQoz12T2XajMBBE+YuJbTYLtIFYDWILjhPPw/z/D9W0MBN78lBH4HN0qa5qe0IVYKnCOc0eYgJ+cEYQsscZJSgai3JckXYLeP8J1rzjoFscs8umU959n56SOaqiRW5KlHUHIQ1OfrzBnKIoRWw6qOsN9e0L1fAb+fQHUb0gLCz8vMfhBeqdmUTXjqQO13XAMM3gqgRPJeI4RUgOWdHDfH6hvN/R2A/U9o6EwKxZIchtVAxPh1ppCBIjgFJO9MwNEoohitgGTMhJRB91OpeWPmAR1gSqZrBqQlSOTyAXLjuNkDI7nuJNfvAc2QFVPUBdZmTtgsjYbcRj1u565rgBhcqQFTQiFxvUlXHyHzCXZRgmkORMTiv0sCKgzN4I5KBv+qdaeHmWo21qFEWFuinQNBVlqJFKhURIRJSjJod6+oBabsjHGwSNKOg30ZDzboC80PPFQtMWeGki6TLlSABOACEE4jPfRg33DGVDDpfrJtUvUAQ03YTCjrROI7J+ghkG1DMBOc+gdQ6V0sWECmApTnt+j7VJwKsBvunBcovADFsJh6zDL9WS9nHpdO+ezkoYU5FDQZKbo9fFDndgXE+IaT3cioRUzL8SfspzF1z4wV7I9z/kBaiaCdyutCIz5UbFEPDZ7OU/4F/PwUWKnVgrBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Exemplo de resultado do PostCSS\"\n        title=\"Exemplo de resultado do PostCSS\"\n        src=\"/static/7d72798fa448ade88dc58144f3e2746e/fcda8/exemplo-postcss.png\"\n        srcset=\"/static/7d72798fa448ade88dc58144f3e2746e/12f09/exemplo-postcss.png 148w,\n/static/7d72798fa448ade88dc58144f3e2746e/e4a3f/exemplo-postcss.png 295w,\n/static/7d72798fa448ade88dc58144f3e2746e/fcda8/exemplo-postcss.png 590w,\n/static/7d72798fa448ade88dc58144f3e2746e/efc66/exemplo-postcss.png 885w,\n/static/7d72798fa448ade88dc58144f3e2746e/c83ae/exemplo-postcss.png 1180w,\n/static/7d72798fa448ade88dc58144f3e2746e/6297e/exemplo-postcss.png 2044w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://postcss.org/\">PostCSS</a> é uma ferramenta que já está no mercado há um bom tempo, e nos permite “compilar” um código escrito com uma sintax diferente, para CSS puro. Essa sintax diferente nos permite através de plugins customizar a forma como escrevemos CSS, de forma a torná-lo mais simples ou mais eficiente por exemplo. Para quem já conhece o PostCSS é muito similar ao <a href=\"https://babeljs.io/\">Babel</a> que é o compiler (ou transpiler) mais famoso de Javascript.</p>\n<blockquote>\n<p>Caso queira saber mais sobre o que é um compiler ou transpiler, <a href=\"https://www.stevefenton.co.uk/2012/11/compiling-vs-transpiling/\">recomendo esse texto</a>.</p>\n</blockquote>\n<p>Nesse post vamos ver como usar o PostCSS em conjunto com o seu plugin <a href=\"https://preset-env.cssdb.org/\">Preset Env</a>, de forma que seja possível escrevermos CSS utilizando funcionalidades que ainda não existem nos navegadores, e mesmo assim obter um CSS que rode sem problemas neles.</p>\n<h2>Futuro do CSS</h2>\n<p>Antes de ir para a prática vamos entender o que são essas funcionalidades novas. De forma <em>resumida</em> assim como no Javascript o CSS possui um processo de adição de novas funcionalidades, que são organizadas em etapas (Stages). E em cada etapa passam por diferentes tipos de testes e requisitos, até que finalmente são implementadas pelos navegadores (como o Chrome). Só que esse processo é bem longo e demorado, então enquanto essas funcionalidades não chegam nos navegadores, podemos utilizar ferramentas como o PostCSS para traduzirem essas funcionalidades novas em CSS atual.</p>\n<p>Podemos ver as próximas funcionalidades do CSS nos links abaixo:</p>\n<ul>\n<li><a href=\"https://cssdb.org/\">CSS DB: Lista de funcionalidades</a>.</li>\n<li><a href=\"https://preset-env.cssdb.org/features\">PostCSS Preset Env: Cada funcionalidade e exemplos</a>.</li>\n</ul>\n<h3>Stages</h3>\n<p>Vamos falar um pouco sobre as etapas pelas quais cada funcionalidade passa:</p>\n<ul>\n<li><em>Stage 0: Ambição</em> - Uma ideia ou um rascunho de uma nova funcionalidade</li>\n<li><em>Stage 1: Experimento</em> - Um teste/experimento que procura resolver/melhorar a linguagem</li>\n<li><em>Stage 2: Possível</em> - Quando a nova funcionalidade já possui uma solução técnica mas ainda pode mudar</li>\n<li><em>Stage 3: Adotado</em> - Foi adotada pela comunidade tanto como ideia quanto tecnicamente e terá poucas mudanças</li>\n<li><em>Stage 4: Padronizado</em> - É um novo padrão na web e será implementada pelos navegadores, etc</li>\n<li><em>X: Rejeitado</em> - A proposta foi rejeitada</li>\n</ul>\n<h2>Como utilizar</h2>\n<p>Primeiro de tudo o jeito mais fácil de começar a brincar com as novas funcionalidades do CSS é utilizando o <a href=\"https://preset-env.cssdb.org/playground\">playground do próprio Preset Env</a>, onde é possível testar todas as funcionalidades de todos os Stages e ver na hora o CSS gerado como resultado do compiler.</p>\n<p>Recomendo brincar um pouco la e descobrir as novas funcionalidades. Duas bem bacanas que estão mudando bastante a forma de se usar CSS puro são:</p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties\">Custom Properties</a> - Que inclusive já foram implementadas pelos navegadores mais modernos e estão no Stage 3.</li>\n<li><a href=\"https://drafts.csswg.org/css-nesting/#:~:text=A%20style%20rule%20can%20be,compound%20selector%20of%20the%20selector.\">Nesting Rules</a> - Que nos permite escrever CSS em cascata (como nos pre-processadores Sass/Less/Stylus), porém ainda está no Stage 1.</li>\n</ul>\n<h3>Instalando no projeto</h3>\n<p>Normalmente o PostCSS já possui integrações com os frameworks mais famosos do mercado (como React, Angular e Vue), nesses casos recomendo que você veja a documentação do seu framework ou a documentação do Bundler utilizado (Webpack, Rollup). Vou deixar alguns links no final do post para tutoriais explicando como instalar em cada framework/bundler.</p>\n<p>Para utilizarmos o Preset Env junto com o PostCSS primeiro instalamos tanto o PostCSS com o Preset Env:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> postcss postcss-preset-env --save-dev</code></pre></div>\n<p>Depois criamos um arquivo chamado <code class=\"language-text\">postcss.config.js</code> e adicionamos a nossa configuração:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'postcss-preset-env'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* Opções */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Depois podemos configurá-lo por exemplo para usarmos todas as novas funcionalidades desde o Stage 1:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'postcss-preset-env'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      stage<span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Podemos também habilitar funcionalidades especificas ou definir para quais navegadores o PostCSS deve gerar o nosso CSS:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'postcss-preset-env'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      stage<span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token comment\">// Esse Stage não suporta Nesting Rules</span>\n      features<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'nesting-rules'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// Porém aqui indicamos que ela seja utilizada</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      browsers<span class=\"token operator\">:</span> <span class=\"token string\">'last 2 versions'</span> \n      <span class=\"token comment\">// Aqui dizemos que o PostCSS deve compilar funcionalidades </span>\n      <span class=\"token comment\">// que não rodem nas ultimas 2 versões dos navegadores mais comuns no mercado</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Para saber mais sobre a parte de browsers do PostCSS e como configurar <a href=\"https://css-tricks.com/browserlist-good-idea/\">recomendo esse link</a>.</p>\n</blockquote>\n<h2>#done</h2>\n<p>Espero que tenham gostado, e qualquer dúvida ou sugestão só mandar um comentário aqui em baixo ou uma mensagem no Twitter.</p>\n<p>Obrigado por ler!</p>\n<h2>Referencias e links úteis</h2>\n<ul>\n<li><a href=\"https://github.com/csstools/postcss-preset-env\">PostCSS Preset Env</a></li>\n<li><a href=\"https://postcss.org/\">PostCSS</a></li>\n<li><a href=\"https://nextjs.org/docs/advanced-features/customizing-postcss-config\">Next.js com PostCSS</a></li>\n<li><a href=\"https://vue-loader.vuejs.org/guide/pre-processors.html#postcss\">Vue Loader com PostCSS</a></li>\n<li><a href=\"https://github.com/vitejs/vite#postcss\">Vite com PostCSS</a></li>\n<li><a href=\"https://webpack.js.org/loaders/postcss-loader/\">Webpack com PostCSS</a></li>\n</ul>","timeToRead":4,"frontmatter":{"title":"Escrevendo CSS do futuro: PostCSS Preset Env","date":"30 setembro, 2020","description":"Como utilizar PostCSS para escrever CSS usando suas novas funcionalidades nos navegadores atuais."}}},"pageContext":{"slug":"/postcss-preset-env/","previous":{"fields":{"slug":"/trabalhando-com-monorepo-em-javascript/"},"frontmatter":{"title":"Trabalhando com Monorepo em Javascript"}},"next":{"fields":{"slug":"/acessibilidade-no-front/"},"frontmatter":{"title":"Acessibilidade no Front: Primeiros passos"}}}},"staticQueryHashes":["2219013263","2841359383"]}